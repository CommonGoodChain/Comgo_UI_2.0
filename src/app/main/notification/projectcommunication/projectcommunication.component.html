
<div class="page-layout simple fullwidth" fxLayout="column">
    <ngx-loading [show]="loading1" [config]="{ backdropBorderRadius: '14px' }"></ngx-loading>

    <!-- HEADER -->
    <div class="header mat-accent-900-bg" fxLayout="row" fxLayoutAlign="space-between center">
      <!-- APP TITLE -->
      <div fxLayout="row" fxLayoutAlign="start center">
          <button mat-icon-button class="mr-0 mr-sm-16" [routerLink]="'/pages/profile'">
            <mat-icon>arrow_back</mat-icon>
          </button>
        <div fxLayout="column" fxLayoutAlign="start start" [@animate]="{value:'*',params:{delay:'100ms',x:'-25px'}}">
          <div class="h2">
            {{'Send Notification' | translate}}
          </div>
        </div>
      </div>
    </div>
    <!-- / HEADER -->

    <!-- CONTENT FOR ADDING MILESTONE -->
    <div class="content p-24">

      <div fxLayout="column" fxLayoutAlign="center center" fxLayout.gt-md="row">

        <!-- Add Prrof Form-->
        <form class="mat-white-bg mat-elevation-z4 p-24 mr-24 mb-24" fxLayout="column" fxLayoutAlign="start" fxFlex="1 0 auto" name="form" [formGroup]="form" (ngSubmit)="saveEmail(form.value)">

        <mat-radio-group class="example-radio-group" formControlName="finalRepOly">
          <mat-radio-button *ngFor="let reportType of reportTypes" class="example-radio-button" [value]="reportType">
            {{reportType | translate}}
          </mat-radio-button>
        </mat-radio-group>

        <div fxLayout="row" fxLayoutAlign="start center" fxFlex="1 0 auto">
          <mat-form-field fxFlex="100">
            <input #subject maxlength="200" matInput placeholder="{{'Subject' | translate}}" formControlName="subject" required>
            <mat-hint align="end">{{subject.value.length}} / 200</mat-hint>
            <mat-error *ngIf="form.get('subject').hasError('required') && form.get('subject').touched">
              {{'Subject is required!' | translate}}
          </mat-error>
          <mat-error *ngIf="form.get('subject').hasError('pattern') && form.get('subject').touched">
            {{'Subject is invalid!' | translate}}
          </mat-error>
          </mat-form-field>
        </div>

        <div fxLayout="row" fxLayoutAlign="start center" fxFlex="1 0 auto">
          <mat-form-field fxFlex="100">
            <textarea #email maxlength="1000" matInput placeholder="{{'Email Body' | translate}}" formControlName="email" required></textarea>
            <mat-hint align="end">{{email.value.length}} / 1000</mat-hint>
            <mat-error *ngIf="form.get('email').hasError('required') && form.get('email').touched">
              {{'Email Body is required!' | translate}}
          </mat-error>
          <mat-error *ngIf="form.get('email').hasError('pattern') && form.get('email').touched">
            {{'Email Body is invalid!' | translate}}
          </mat-error>
          </mat-form-field>
        </div>

        <div fxLayout="row" fxLayoutAlign="start center" fxFlex="1 0 auto">
          <mat-form-field fxFlex="100">
            <textarea #sms maxlength="1000" matInput placeholder="{{'SMS Body' | translate}}" formControlName="sms" required></textarea>
            <mat-hint align="end">{{sms.value.length}} / 1000</mat-hint>
            <mat-error *ngIf="form.get('sms').hasError('required') && form.get('sms').touched">
              {{'SMS Body is required!' | translate}}
          </mat-error>
          <mat-error *ngIf="form.get('sms').hasError('pattern') && form.get('sms').touched">
            {{'SMS Body is invalid!' | translate}}
          </mat-error>
          </mat-form-field>
        </div>

        <div fxLayout="row" fxLayoutAlign="start center" fxFlex="1 0 auto">
          <div class="file-uploader">
            <input hidden type="file" (change)="uploadFile($event)" #fileInput/>
            <button mat-fab type="button" class="add-file-button mat-warn" (click)="fileInput.click()" aria-label="Add file">
              <mat-icon>add</mat-icon>
            </button>&nbsp;&nbsp;<span style="color:red">{{fileName}}</span>
          </div>
        </div>
        
        <div>
            <br/>
         <div fxLayout="row" fxLayoutAlign="start center">
            <button mat-raised-button type="button" color="warn" (click)="cancel()">
                {{'Cancel' | translate}}
            </button>&nbsp;&nbsp;&nbsp;
            <button mat-raised-button type="submit" [disabled]="!form.valid" color="accent-900-bg" >
              Save
            </button>
        </div>
       </div>
      </form>
      </div>
      <!-- / CONTENT -->
    </div>
    <hr>
    <footer>
            <br/>
            <br/>
            <p style="text-align: center;">Copyright Â© 2020</p>
            <br/>
          <br/>
          </footer>
    </div>
    <!-- / CENTER -->